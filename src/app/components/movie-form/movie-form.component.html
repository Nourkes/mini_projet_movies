<div class="container mx-auto p-4 max-w-2xl">
    <h1 class="text-3xl font-bold text-white mb-6">
        {{ isEditMode ? 'Edit Movie/Series' : 'Add New Movie/Series' }}
    </h1>

    <form [formGroup]="movieForm" (ngSubmit)="onSubmit()" class="bg-gray-800 rounded-lg p-6 shadow-xl">
        <!-- Title -->
        <div class="mb-4">
            <label class="block text-gray-300 font-medium mb-2">Title *</label>
            <input type="text" formControlName="title"
                class="w-full bg-gray-700 text-white px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-600"
                placeholder="Enter movie/series title" />
            <div *ngIf="movieForm.get('title')?.invalid && movieForm.get('title')?.touched"
                class="text-red-500 text-sm mt-1">
                Title is required
            </div>
        </div>

        <!-- Year -->
        <div class="mb-4">
            <label class="block text-gray-300 font-medium mb-2">Year *</label>
            <input type="number" formControlName="year"
                class="w-full bg-gray-700 text-white px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-600"
                placeholder="e.g., 2024" />
            <div *ngIf="movieForm.get('year')?.invalid && movieForm.get('year')?.touched"
                class="text-red-500 text-sm mt-1">
                Year must be between 1900 and {{ currentYear }}
            </div>
        </div>

        <!-- Genre (Checkboxes) -->
        <div class="mb-4">
            <label class="block text-gray-300 font-medium mb-2">Genre * (Select at least one)</label>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
                <label *ngFor="let genre of genreOptions" class="flex items-center text-gray-300">
                    <input type="checkbox" [value]="genre" [checked]="isGenreSelected(genre)"
                        (change)="onGenreChange($event)" class="mr-2" />
                    {{ genre }}
                </label>
            </div>
            <div *ngIf="genreArray.invalid && genreArray.touched" class="text-red-500 text-sm mt-1">
                At least one genre is required
            </div>
        </div>

        <!-- Rating -->
        <div class="mb-4">
            <label class="block text-gray-300 font-medium mb-2">Rating * (0-10)</label>
            <input type="number" step="0.1" formControlName="rating"
                class="w-full bg-gray-700 text-white px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-600"
                placeholder="e.g., 8.5" />
            <div *ngIf="movieForm.get('rating')?.invalid && movieForm.get('rating')?.touched"
                class="text-red-500 text-sm mt-1">
                Rating must be between 0 and 10
            </div>
        </div>

        <!-- Poster URL -->
        <div class="mb-4">
            <label class="block text-gray-300 font-medium mb-2">Poster URL *</label>
            <input type="url" formControlName="poster"
                class="w-full bg-gray-700 text-white px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-600"
                placeholder="https://example.com/poster.jpg" />
            <div *ngIf="movieForm.get('poster')?.invalid && movieForm.get('poster')?.touched"
                class="text-red-500 text-sm mt-1">
                Valid URL is required
            </div>
        </div>

        <!-- Synopsis -->
        <div class="mb-4">
            <label class="block text-gray-300 font-medium mb-2">Synopsis *</label>
            <textarea formControlName="synopsis" rows="4"
                class="w-full bg-gray-700 text-white px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-600"
                placeholder="Enter plot summary"></textarea>
            <div *ngIf="movieForm.get('synopsis')?.invalid && movieForm.get('synopsis')?.touched"
                class="text-red-500 text-sm mt-1">
                Synopsis is required
            </div>
        </div>

        <!-- Cast -->
        <div class="mb-4">
            <label class="block text-gray-300 font-medium mb-2">Cast * (comma-separated)</label>
            <input type="text" formControlName="cast"
                class="w-full bg-gray-700 text-white px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-600"
                placeholder="e.g., Actor 1, Actor 2, Actor 3" />
            <div *ngIf="movieForm.get('cast')?.invalid && movieForm.get('cast')?.touched"
                class="text-red-500 text-sm mt-1">
                Cast is required
            </div>
        </div>

        <!-- Type -->
        <div class="mb-4">
            <label class="block text-gray-300 font-medium mb-2">Type *</label>
            <select formControlName="type"
                class="w-full bg-gray-700 text-white px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-600">
                <option value="movie">Movie</option>
                <option value="series">Series</option>
            </select>
        </div>

        <!-- Duration -->
        <div class="mb-4">
            <label class="block text-gray-300 font-medium mb-2">Duration *</label>
            <input type="text" formControlName="duration"
                class="w-full bg-gray-700 text-white px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-600"
                placeholder="e.g., 2h 15m or 3 Seasons" />
            <div *ngIf="movieForm.get('duration')?.invalid && movieForm.get('duration')?.touched"
                class="text-red-500 text-sm mt-1">
                Duration is required
            </div>
        </div>

        <!-- Actions -->
        <div class="flex space-x-4 mt-6">
            <button type="submit" [disabled]="movieForm.invalid"
                class="flex-1 bg-red-600 hover:bg-red-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded transition">
                {{ isEditMode ? 'Update' : 'Create' }}
            </button>
            <button type="button" (click)="onCancel()"
                class="flex-1 bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded transition">
                Cancel
            </button>
        </div>
    </form>
</div>