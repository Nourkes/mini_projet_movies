<div class="container mx-auto p-4">
    <!-- Filters & Sort -->
    <div
        class="flex flex-col md:flex-row justify-between items-center mb-8 bg-primary-light/50 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/5">
        <div class="flex items-center space-x-4 mb-4 md:mb-0 w-full md:w-auto">
            <label class="text-gray-300 font-medium whitespace-nowrap">Genre:</label>
            <div class="relative w-full md:w-64">
                <select [(ngModel)]="selectedGenre" (change)="onFilterChange()"
                    class="w-full bg-primary-dark text-white px-4 py-2.5 rounded-lg appearance-none focus:outline-none focus:ring-2 focus:ring-secondary border border-white/10 cursor-pointer hover:bg-primary-dark/80 transition-colors">
                    <option value="">All Genres</option>
                    <option *ngFor="let g of genres" [value]="g">{{ g }}</option>
                </select>
                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400">
                    <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                        <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
                    </svg>
                </div>
            </div>
        </div>

        <div class="flex items-center space-x-4 w-full md:w-auto">
            <label class="text-gray-300 font-medium whitespace-nowrap">Sort By:</label>
            <div class="relative w-full md:w-64">
                <select [(ngModel)]="sortOption" (change)="onFilterChange()"
                    class="w-full bg-primary-dark text-white px-4 py-2.5 rounded-lg appearance-none focus:outline-none focus:ring-2 focus:ring-secondary border border-white/10 cursor-pointer hover:bg-primary-dark/80 transition-colors">
                    <option value="rating_desc">Rating (High to Low)</option>
                    <option value="rating_asc">Rating (Low to High)</option>
                    <option value="year_desc">Year (Newest)</option>
                    <option value="year_asc">Year (Oldest)</option>
                </select>
                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400">
                    <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                        <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Count -->
    <div class="mb-6 text-gray-400 font-medium flex items-center">
        <span class="bg-secondary/20 text-secondary px-3 py-1 rounded-full text-sm border border-secondary/20">
            Found {{ filteredMovies.length }} results
            <span *ngIf="searchQuery"> for "<span class="text-white">{{ searchQuery }}</span>"</span>
        </span>
    </div>

    <!-- Grid -->
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-8">
        <app-movie-card *ngFor="let movie of filteredMovies" [movie]="movie"></app-movie-card>
    </div>

    <!-- No Results -->
    <div *ngIf="filteredMovies.length === 0"
        class="text-center py-24 text-gray-500 bg-primary-light/30 rounded-xl border border-white/5 mt-8">
        <div class="text-6xl mb-4">üîç</div>
        <p class="text-xl font-medium text-gray-300">No movies found matching your criteria.</p>
        <p class="text-sm mt-2">Try adjusting your filters or search query.</p>
    </div>
</div>